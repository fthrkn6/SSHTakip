<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMMS Sistem Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #4F46E5;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        .subtitle {
            text-align: center;
            color: #64748B;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .nav-tab {
            padding: 12px 24px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .nav-tab:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        .chart-section {
            display: none;
            background: #f8fafc;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .chart-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-title {
            color: #4F46E5;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #4F46E5;
        }
        .chart-description {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #10B981;
            color: #64748B;
        }
        .mermaid {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
            color: #64748B;
        }
        .legend {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #e2e8f0;
        }
        .legend h4 {
            color: #4F46E5;
            margin-bottom: 10px;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 15px 5px 0;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        .legend-role { background: #DBEAFE; color: #1E40AF; }
        .legend-process { background: #D1FAE5; color: #065F46; }
        .legend-decision { background: #FEF3C7; color: #92400E; }
        .legend-data { background: #E0E7FF; color: #3730A3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ CMMS Sistem Flowchart</h1>
        <p class="subtitle">Computerized Maintenance Management System - Tren BakÄ±m YÃ¶netim Sistemi</p>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showChart(1)">ğŸ“Š Genel Mimari</button>
            <button class="nav-tab" onclick="showChart(2)">ğŸ‘¤ KullanÄ±cÄ± AkÄ±ÅŸÄ±</button>
            <button class="nav-tab" onclick="showChart(3)">ğŸ”§ Ekipman YÃ¶netimi</button>
            <button class="nav-tab" onclick="showChart(4)">ğŸ“‹ Ä°ÅŸ Emri</button>
            <button class="nav-tab" onclick="showChart(5)">ğŸ”„ BakÄ±m Planlama</button>
            <button class="nav-tab" onclick="showChart(6)">ğŸ“ˆ KPI & Analiz</button>
            <button class="nav-tab" onclick="showChart(7)">ğŸ’¾ Veri AkÄ±ÅŸÄ±</button>
            <button class="nav-tab" onclick="showChart(8)">ğŸ—„ï¸ Database</button>
            <button class="nav-tab" onclick="showChart(9)">ğŸ”’ GÃ¼venlik</button>
            <button class="nav-tab" onclick="showChart(10)">ğŸŒ API</button>
        </div>

        <!-- Chart 1: Genel Sistem Mimarisi -->
        <div id="chart1" class="chart-section active">
            <h2 class="chart-title">ğŸ“Š Genel Sistem Mimarisi</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> CMMS sisteminin ana modÃ¼lleri ve bunlarÄ±n birbirleriyle iliÅŸkisi gÃ¶sterilmektedir.
            </div>
            <div class="mermaid">
graph TB
    User[ğŸ‘¤ KullanÄ±cÄ±] --> Login[ğŸ” Login SayfasÄ±]
    Login --> Auth{ğŸ” Kimlik DoÄŸrulama}
    Auth -->|âœ… BaÅŸarÄ±lÄ±| Dashboard[ğŸ“Š Dashboard]
    Auth -->|âŒ BaÅŸarÄ±sÄ±z| Login
    
    Dashboard --> Equipment[ğŸ”§ Ekipman YÃ¶netimi]
    Dashboard --> WorkOrder[ğŸ“‹ Ä°ÅŸ Emri YÃ¶netimi]
    Dashboard --> Maintenance[ğŸ”„ BakÄ±m PlanlarÄ±]
    Dashboard --> KPI[ğŸ“ˆ KPI & Raporlama]
    Dashboard --> Users[ğŸ‘¥ KullanÄ±cÄ± YÃ¶netimi]
    
    Equipment --> EquipDetail[ğŸ“ Ekipman Detay]
    Equipment --> SensorData[ğŸ“¡ SensÃ¶r Verileri]
    
    WorkOrder --> WODetail[ğŸ“„ Ä°ÅŸ Emri Detay]
    WorkOrder --> MainLog[ğŸ“ BakÄ±m KayÄ±tlarÄ±]
    
    Maintenance --> Plans[ğŸ“… BakÄ±m PlanlarÄ±]
    Maintenance --> Schedule[â° Planlama]
    
    KPI --> Analytics[ğŸ“Š Analiz & Metrikler]
    KPI --> Reports[ğŸ“‘ Raporlar]
    
    style Dashboard fill:#667eea,color:#fff,stroke:#4338CA
    style Equipment fill:#10B981,color:#fff,stroke:#059669
    style WorkOrder fill:#F59E0B,color:#fff,stroke:#D97706
    style Maintenance fill:#06B6D4,color:#fff,stroke:#0891B2
    style KPI fill:#EF4444,color:#fff,stroke:#DC2626
    style Users fill:#8B5CF6,color:#fff,stroke:#7C3AED
            </div>
        </div>

        <!-- Chart 2: KullanÄ±cÄ± AkÄ±ÅŸ ÅemasÄ± -->
        <div id="chart2" class="chart-section">
            <h2 class="chart-title">ğŸ‘¤ KullanÄ±cÄ± AkÄ±ÅŸ ÅemasÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> KullanÄ±cÄ±nÄ±n sisteme giriÅŸ yapmasÄ± ve rol bazlÄ± eriÅŸim akÄ±ÅŸÄ±.
            </div>
            <div class="mermaid">
flowchart TD
    Start([ğŸš€ Sistem BaÅŸlangÄ±Ã§]) --> CheckAuth{ğŸ” Kimlik<br/>DoÄŸrulandÄ± mÄ±?}
    
    CheckAuth -->|âŒ HayÄ±r| LoginPage[ğŸ” Login SayfasÄ±]
    LoginPage --> EnterCred[âŒ¨ï¸ KullanÄ±cÄ± AdÄ± & Åifre Gir]
    EnterCred --> ValidateAuth{âœ… GeÃ§erli mi?}
    
    ValidateAuth -->|âŒ HayÄ±r| ErrorMsg[âš ï¸ Hata MesajÄ±]
    ErrorMsg --> LoginPage
    
    ValidateAuth -->|âœ… Evet| UpdateLogin[ğŸ• Son GiriÅŸ GÃ¼ncelle]
    UpdateLogin --> CheckAuth
    
    CheckAuth -->|âœ… Evet| CheckRole{ğŸ‘¤ KullanÄ±cÄ± RolÃ¼?}
    
    CheckRole -->|ğŸ”´ Admin| AdminDash[ğŸ‘‘ Admin Dashboard]
    CheckRole -->|ğŸ”µ Manager| ManagerDash[ğŸ‘” Manager Dashboard]
    CheckRole -->|ğŸŸ¢ Technician| TechDash[ğŸ”§ Teknisyen Dashboard]
    CheckRole -->|ğŸŸ¡ Operator| OpDash[âš™ï¸ OperatÃ¶r Dashboard]
    
    AdminDash --> FullAccess[âœ¨ TÃ¼m ModÃ¼ller]
    ManagerDash --> LimitedAccess[ğŸ“Š YÃ¶netim ModÃ¼lleri]
    TechDash --> WorkAccess[ğŸ”§ Ä°ÅŸ & BakÄ±m ModÃ¼lleri]
    OpDash --> ViewAccess[ğŸ‘ï¸ GÃ¶rÃ¼ntÃ¼leme]
    
    FullAccess --> MainMenu[ğŸ  Ana MenÃ¼]
    LimitedAccess --> MainMenu
    WorkAccess --> MainMenu
    ViewAccess --> MainMenu
    
    MainMenu --> Logout[ğŸšª Ã‡Ä±kÄ±ÅŸ Yap]
    Logout --> Start
    
    style AdminDash fill:#EF4444,color:#fff
    style ManagerDash fill:#3B82F6,color:#fff
    style TechDash fill:#10B981,color:#fff
    style OpDash fill:#F59E0B,color:#fff
            </div>
        </div>

        <!-- Chart 3: Ekipman YÃ¶netimi -->
        <div id="chart3" class="chart-section">
            <h2 class="chart-title">ğŸ”§ Ekipman YÃ¶netimi Ä°ÅŸ AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> Ekipman ekleme, gÃ¶rÃ¼ntÃ¼leme, dÃ¼zenleme ve filtreleme iÅŸlemleri.
            </div>
            <div class="mermaid">
flowchart TD
    EquipStart([ğŸ”§ Ekipman ModÃ¼lÃ¼]) --> EquipList[ğŸ“‹ Ekipman Listesi]
    
    EquipList --> Action{âš¡ Aksiyon SeÃ§}
    
    Action -->|ğŸ‘ï¸ GÃ¶rÃ¼ntÃ¼le| ViewEquip[ğŸ“„ Ekipman Detay]
    Action -->|â• Yeni Ekle| AddEquip[ğŸ“ Yeni Ekipman Formu]
    Action -->|âœï¸ DÃ¼zenle| EditEquip[âœï¸ Ekipman DÃ¼zenle]
    Action -->|ğŸ” Filtrele| FilterEquip[ğŸ” Filtreleme]
    
    AddEquip --> ValidateEquip{âœ… Form GeÃ§erli mi?}
    ValidateEquip -->|âŒ HayÄ±r| FormError[âš ï¸ Hata GÃ¶ster]
    FormError --> AddEquip
    ValidateEquip -->|âœ… Evet| SaveEquip[ğŸ’¾ VeritabanÄ±na Kaydet]
    SaveEquip --> EquipList
    
    ViewEquip --> ShowDetails[ğŸ“Š DetaylarÄ± GÃ¶ster]
    ShowDetails --> SensorGraph[ğŸ“ˆ SensÃ¶r Grafikleri]
    ShowDetails --> EquipHierarchy[ğŸŒ³ HiyerarÅŸi GÃ¶ster]
    ShowDetails --> RelatedWO[ğŸ“‹ Ä°lgili Ä°ÅŸ Emirleri]
    ShowDetails --> MainHistory[ğŸ“œ BakÄ±m GeÃ§miÅŸi]
    
    EditEquip --> UpdateDB[ğŸ”„ GÃ¼ncelle]
    UpdateDB --> EquipList
    
    FilterEquip --> FilterResults[ğŸ“Š FiltrelenmiÅŸ SonuÃ§lar]
    FilterResults --> EquipList
    
    style SaveEquip fill:#10B981,color:#fff
    style ViewEquip fill:#3B82F6,color:#fff
    style FilterEquip fill:#F59E0B,color:#fff
            </div>
        </div>

        <!-- Chart 4: Ä°ÅŸ Emri Ä°ÅŸ AkÄ±ÅŸÄ± -->
        <div id="chart4" class="chart-section">
            <h2 class="chart-title">ğŸ“‹ Ä°ÅŸ Emri Ä°ÅŸ AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> Ä°ÅŸ emri oluÅŸturma, atama, durum gÃ¼ncelleme ve tamamlama sÃ¼reci.
            </div>
            <div class="mermaid">
flowchart TD
    WOStart([ğŸ“‹ Ä°ÅŸ Emri ModÃ¼lÃ¼]) --> WOList[ğŸ“‘ Ä°ÅŸ Emri Listesi]
    
    WOList --> WOAction{âš¡ Aksiyon}
    
    WOAction -->|â• Yeni OluÅŸtur| CreateWO[ğŸ“ Yeni Ä°ÅŸ Emri]
    WOAction -->|ğŸ‘ï¸ Detay| WODetail[ğŸ“„ Ä°ÅŸ Emri Detay]
    WOAction -->|ğŸ” Filtre| FilterWO[ğŸ” Durum/Ã–ncelik Filtre]
    
    CreateWO --> SelectEquip[ğŸ”§ Ekipman SeÃ§]
    SelectEquip --> WOForm[ğŸ“ Form Doldur]
    WOForm --> AssignTech{ğŸ‘¤ Teknisyen<br/>Ata?}
    
    AssignTech -->|âœ… Evet| SelectTech[ğŸ‘· Teknisyen SeÃ§]
    AssignTech -->|âŒ HayÄ±r| SetPending[â³ Pending Olarak Kaydet]
    SelectTech --> SetScheduled[ğŸ“… Scheduled Olarak Kaydet]
    
    SetPending --> GenerateWO[ğŸ”¢ Ä°ÅŸ Emri No OluÅŸtur]
    SetScheduled --> GenerateWO
    GenerateWO --> SaveWO[ğŸ’¾ VeritabanÄ±na Kaydet]
    SaveWO --> Notify[ğŸ”” Bildirim GÃ¶nder]
    Notify --> WOList
    
    WODetail --> ShowWO[ğŸ“Š Ä°ÅŸ Emri Bilgileri]
    ShowWO --> WOStatus{ğŸ“Œ Durum}
    
    WOStatus -->|â³ Pending| CanSchedule[ğŸ“… Planlanabilir]
    WOStatus -->|ğŸ“… Scheduled| CanStart[â–¶ï¸ BaÅŸlatÄ±labilir]
    WOStatus -->|ğŸ”„ In Progress| CanComplete[âœ… Tamamlanabilir]
    WOStatus -->|âœ… Completed| Closed[ğŸ”’ KapalÄ±]
    
    CanStart --> UpdateStatus[ğŸ”„ Durumu GÃ¼ncelle]
    CanComplete --> AddNotes[ğŸ“ Tamamlama NotlarÄ±]
    AddNotes --> AddCost[ğŸ’° GerÃ§ek Maliyet]
    AddCost --> UpdateStatus
    
    UpdateStatus --> AddMainLog[ğŸ“ BakÄ±m KaydÄ± Ekle]
    AddMainLog --> WODetail
    
    style CreateWO fill:#10B981,color:#fff
    style WODetail fill:#3B82F6,color:#fff
    style Closed fill:#64748B,color:#fff
            </div>
        </div>

        <!-- Chart 5: BakÄ±m Planlama -->
        <div id="chart5" class="chart-section">
            <h2 class="chart-title">ğŸ”„ BakÄ±m Planlama Ä°ÅŸ AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> Ã–nleyici ve tahmine dayalÄ± bakÄ±m planlamasÄ± sÃ¼reÃ§leri.
            </div>
            <div class="mermaid">
flowchart TD
    MainStart([ğŸ”„ BakÄ±m ModÃ¼lÃ¼]) --> MainMenu{ğŸ“‹ MenÃ¼}
    
    MainMenu -->|ğŸ“… Planlar| PlanList[ğŸ“‘ BakÄ±m PlanlarÄ±]
    MainMenu -->|ğŸ“ KayÄ±tlar| LogList[ğŸ“œ BakÄ±m KayÄ±tlarÄ±]
    
    PlanList --> PlanAction{âš¡ Aksiyon}
    
    PlanAction -->|â• Yeni Plan| CreatePlan[ğŸ“ Yeni Plan OluÅŸtur]
    PlanAction -->|ğŸ‘ï¸ Detay| PlanDetail[ğŸ“„ Plan DetayÄ±]
    PlanAction -->|âœï¸ DÃ¼zenle| EditPlan[âœï¸ Plan DÃ¼zenle]
    
    CreatePlan --> SelectEquipPlan[ğŸ”§ Ekipman SeÃ§]
    SelectEquipPlan --> SetType{ğŸ¯ Plan Tipi}
    
    SetType -->|ğŸ›¡ï¸ Preventive| SetInterval[â° Periyot Belirle]
    SetType -->|ğŸ”® Predictive| SetCondition[ğŸ“Š KoÅŸul Belirle]
    
    SetInterval --> SchedulePlan[ğŸ“… Planlama Tarihi]
    SetCondition --> SetThreshold[âš ï¸ EÅŸik DeÄŸerler]
    SetThreshold --> SchedulePlan
    
    SchedulePlan --> SavePlan[ğŸ’¾ PlanÄ± Kaydet]
    SavePlan --> AutoWO{ğŸ¤– Otomatik Ä°ÅŸ<br/>Emri OluÅŸtur?}
    
    AutoWO -->|âœ… Evet| CreateAutoWO[ğŸ“‹ Ä°ÅŸ Emri OluÅŸtur]
    AutoWO -->|âŒ HayÄ±r| PlanList
    CreateAutoWO --> PlanList
    
    PlanDetail --> ShowPlanInfo[ğŸ“Š Plan Bilgileri]
    ShowPlanInfo --> RelatedLogs[ğŸ“ Ä°lgili KayÄ±tlar]
    ShowPlanInfo --> NextSchedule[ğŸ“… Sonraki Tarih]
    
    LogList --> AddLog[â• Yeni KayÄ±t Ekle]
    AddLog --> LinkWO[ğŸ”— Ä°ÅŸ Emri BaÄŸla]
    LinkWO --> LogDetails[ğŸ“ KayÄ±t DetaylarÄ±]
    LogDetails --> SaveLog[ğŸ’¾ KayÄ±t Kaydet]
    SaveLog --> UpdateKPI[ğŸ“ˆ KPI GÃ¼ncelle]
    UpdateKPI --> LogList
    
    style SetInterval fill:#10B981,color:#fff
    style SetCondition fill:#3B82F6,color:#fff
    style CreateAutoWO fill:#F59E0B,color:#fff
            </div>
        </div>

        <!-- Chart 6: KPI & Analiz -->
        <div id="chart6" class="chart-section">
            <h2 class="chart-title">ğŸ“ˆ KPI & Analiz Ä°ÅŸ AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> ISO 55000 ve EN 15341 standartlarÄ±na uygun KPI hesaplama ve raporlama.
            </div>
            <div class="mermaid">
flowchart TD
    KPIStart([ğŸ“ˆ KPI ModÃ¼lÃ¼]) --> KPIDash[ğŸ“Š KPI Dashboard]
    
    KPIDash --> ShowMetrics[ğŸ“Š Metrikleri GÃ¶ster]
    ShowMetrics --> MTBF[â±ï¸ MTBF - ArÄ±za ArasÄ± SÃ¼re]
    ShowMetrics --> MTTR[ğŸ”§ MTTR - OnarÄ±m SÃ¼resi]
    ShowMetrics --> Availability[âœ… KullanÄ±labilirlik]
    ShowMetrics --> Reliability[ğŸ’ GÃ¼venilirlik]
    ShowMetrics --> OEE[âš™ï¸ OEE - Ekipman EtkinliÄŸi]
    
    KPIDash --> CalcAction{ğŸ§® Hesaplama}
    
    CalcAction -->|ğŸ‘¤ Manuel| ManualCalc[âœï¸ Manuel KPI Hesapla]
    CalcAction -->|ğŸ¤– Otomatik| AutoCalc[ğŸ”„ Otomatik Hesaplama]
    
    ManualCalc --> SelectPeriod[ğŸ“… DÃ¶nem SeÃ§]
    SelectPeriod --> CollectData[ğŸ“Š Veri Topla]
    
    CollectData --> GetFailures[âš ï¸ ArÄ±za Verileri]
    CollectData --> GetMaintenance[ğŸ”§ BakÄ±m Verileri]
    CollectData --> GetSensor[ğŸ“¡ SensÃ¶r Verileri]
    
    GetFailures --> Calculate[ğŸ§® KPI Hesapla]
    GetMaintenance --> Calculate
    GetSensor --> Calculate
    
    Calculate --> CompareStandards{ğŸ“ Standartlar<br/>ile KarÅŸÄ±laÅŸtÄ±r}
    
    CompareStandards -->|ISO 55000| ISO55000Check[ğŸ† Asset Management]
    CompareStandards -->|EN 15341| EN15341Check[ğŸ“Š Maintenance KPI]
    
    ISO55000Check --> GenerateReport[ğŸ“‘ Rapor OluÅŸtur]
    EN15341Check --> GenerateReport
    
    GenerateReport --> SaveKPI[ğŸ’¾ KPI Kaydet]
    SaveKPI --> Visualize[ğŸ“ˆ Grafikleri GÃ¶ster]
    Visualize --> Export{ğŸ“¥ DÄ±ÅŸa Aktar?}
    
    Export -->|ğŸ“„ PDF| ExportPDF[ğŸ“„ PDF OluÅŸtur]
    Export -->|ğŸ“Š Excel| ExportExcel[ğŸ“Š Excel OluÅŸtur]
    Export -->|âŒ HayÄ±r| KPIDash
    
    ExportPDF --> Download[â¬‡ï¸ Ä°ndir]
    ExportExcel --> Download
    Download --> KPIDash
    
    style MTBF fill:#10B981,color:#fff
    style MTTR fill:#F59E0B,color:#fff
    style Availability fill:#3B82F6,color:#fff
    style GenerateReport fill:#8B5CF6,color:#fff
            </div>
        </div>

        <!-- Chart 7: Veri AkÄ±ÅŸÄ± -->
        <div id="chart7" class="chart-section">
            <h2 class="chart-title">ğŸ’¾ Veri AkÄ±ÅŸÄ± DiyagramÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> Sistemdeki veri giriÅŸi, iÅŸleme, depolama ve Ã§Ä±ktÄ± akÄ±ÅŸÄ±.
            </div>
            <div class="mermaid">
flowchart LR
    subgraph Input [ğŸ“¥ Veri GiriÅŸi]
        Sensor[ğŸ“¡ SensÃ¶r Verileri]
        Manual[âœï¸ Manuel GiriÅŸler]
        Schedule[ğŸ“… Planlama]
    end
    
    subgraph Processing [âš™ï¸ Ä°ÅŸleme KatmanÄ±]
        Validation[âœ… DoÄŸrulama]
        Business[ğŸ’¼ Ä°ÅŸ MantÄ±ÄŸÄ±]
        Calculation[ğŸ§® Hesaplama]
    end
    
    subgraph Storage [ğŸ’¾ Depolama]
        Database[ğŸ—„ï¸ SQLite Database]
        Logs[ğŸ“œ Log DosyalarÄ±]
    end
    
    subgraph Output [ğŸ“¤ Ã‡Ä±ktÄ±]
        Dashboard[ğŸ“Š Dashboard]
        Reports[ğŸ“‘ Raporlar]
        Alerts[ğŸ”” UyarÄ±lar]
        API[ğŸŒ REST API]
    end
    
    Sensor --> Validation
    Manual --> Validation
    Schedule --> Validation
    
    Validation --> Business
    Business --> Calculation
    Calculation --> Database
    
    Business --> Logs
    
    Database --> Dashboard
    Database --> Reports
    Database --> API
    
    Calculation --> Alerts
    
    API --> External[ğŸ”— Harici Sistemler]
    
    style Input fill:#10B981,color:#fff
    style Processing fill:#3B82F6,color:#fff
    style Storage fill:#F59E0B,color:#fff
    style Output fill:#8B5CF6,color:#fff
            </div>
        </div>

        <!-- Chart 8: Database Schema -->
        <div id="chart8" class="chart-section">
            <h2 class="chart-title">ğŸ—„ï¸ Database Ä°liÅŸki ÅemasÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> SQLite veritabanÄ± yapÄ±sÄ± ve tablolar arasÄ± iliÅŸkiler (ER Diagram).
            </div>
            <div class="mermaid">
erDiagram
    USER ||--o{ WORKORDER : creates
    USER ||--o{ WORKORDER : assigned
    USER ||--o{ MAINTENANCELOG : performs
    
    EQUIPMENT ||--o{ EQUIPMENT : "parent-child"
    EQUIPMENT ||--o{ WORKORDER : has
    EQUIPMENT ||--o{ MAINTENANCEPLAN : has
    EQUIPMENT ||--o{ SENSORDATA : generates
    EQUIPMENT ||--o{ FAILURE : experiences
    
    WORKORDER ||--o{ MAINTENANCELOG : includes
    MAINTENANCEPLAN ||--o{ WORKORDER : generates
    
    EQUIPMENT ||--o{ INVENTORY : uses
    
    USER {
        int id PK
        string username
        string password_hash
        string email
        string role
        boolean is_active
        datetime last_login
    }
    
    EQUIPMENT {
        int id PK
        string equipment_code
        string name
        string equipment_type
        string status
        string criticality
        int parent_id FK
    }
    
    WORKORDER {
        int id PK
        string work_order_number
        int equipment_id FK
        int created_by FK
        int assigned_to FK
        string status
        string priority
        string work_type
    }
    
    MAINTENANCEPLAN {
        int id PK
        int equipment_id FK
        string plan_type
        int interval_days
        datetime next_due_date
    }
    
    MAINTENANCELOG {
        int id PK
        int work_order_id FK
        int technician_id FK
        datetime log_date
        text action_taken
        float duration_hours
    }
    
    SENSORDATA {
        int id PK
        int equipment_id FK
        string sensor_type
        float value
        datetime timestamp
    }
    
    FAILURE {
        int id PK
        int equipment_id FK
        datetime failure_date
        datetime resolution_date
        text description
    }
    
    KPI {
        int id PK
        date calculation_date
        float mtbf
        float mttr
        float availability
        float reliability
    }
    
    INVENTORY {
        int id PK
        int equipment_id FK
        string part_name
        int quantity
        float unit_cost
    }
            </div>
        </div>

        <!-- Chart 9: GÃ¼venlik -->
        <div id="chart9" class="chart-section">
            <h2 class="chart-title">ğŸ”’ GÃ¼venlik & Yetkilendirme AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> ISO 27001 uyumlu rol bazlÄ± eriÅŸim kontrolÃ¼ ve gÃ¼venlik mekanizmalarÄ±.
            </div>
            <div class="mermaid">
flowchart TD
    Request[ğŸŒ HTTP Ä°stek] --> CheckSession{ğŸ” Session<br/>Var mÄ±?}
    
    CheckSession -->|âŒ HayÄ±r| Redirect401[ğŸš« 401 Unauthorized]
    Redirect401 --> LoginRedirect[â†©ï¸ Login'e YÃ¶nlendir]
    
    CheckSession -->|âœ… Evet| LoadUser[ğŸ‘¤ KullanÄ±cÄ± YÃ¼kle]
    LoadUser --> CheckActive{âœ… Aktif mi?}
    
    CheckActive -->|âŒ HayÄ±r| Deactivated[â›” Hesap Devre DÄ±ÅŸÄ±]
    Deactivated --> LoginRedirect
    
    CheckActive -->|âœ… Evet| CheckRole{ğŸ‘¤ Rol KontrolÃ¼}
    
    CheckRole -->|ğŸ‘‘ Admin| FullPermission[âœ¨ TÃ¼m Yetkiler]
    CheckRole -->|ğŸ‘” Manager| ManagerPermission[ğŸ“Š YÃ¶netim Yetkileri]
    CheckRole -->|ğŸ”§ Technician| TechPermission[ğŸ› ï¸ Teknisyen Yetkileri]
    CheckRole -->|âš™ï¸ Operator| OperatorPermission[ğŸ‘ï¸ OperatÃ¶r Yetkileri]
    
    FullPermission --> ProcessRequest[âš™ï¸ Ä°steÄŸi Ä°ÅŸle]
    ManagerPermission --> CheckResource{ğŸ” Kaynak<br/>EriÅŸimi?}
    TechPermission --> CheckResource
    OperatorPermission --> CheckResource
    
    CheckResource -->|âœ… Ä°zinli| ProcessRequest
    CheckResource -->|âŒ Ä°zinsiz| Forbidden403[ğŸš« 403 Forbidden]
    
    ProcessRequest --> LogAction[ğŸ“ Aksiyonu Logla]
    LogAction --> Response[âœ… YanÄ±t DÃ¶ndÃ¼r]
    
    Forbidden403 --> ErrorPage[âš ï¸ Hata SayfasÄ±]
    ErrorPage --> Response
    
    style FullPermission fill:#EF4444,color:#fff
    style ManagerPermission fill:#3B82F6,color:#fff
    style TechPermission fill:#10B981,color:#fff
    style OperatorPermission fill:#F59E0B,color:#fff
            </div>
        </div>

        <!-- Chart 10: API -->
        <div id="chart10" class="chart-section">
            <h2 class="chart-title">ğŸŒ API Endpoint AkÄ±ÅŸÄ±</h2>
            <div class="chart-description">
                <strong>AÃ§Ä±klama:</strong> REST API endpoint'leri ve HTTP operasyonlarÄ±.
            </div>
            <div class="mermaid">
flowchart LR
    subgraph API [ğŸŒ REST API Endpoints]
        Auth[ğŸ” /api/auth]
        Equip[ğŸ”§ /api/equipment]
        WO[ğŸ“‹ /api/workorders]
        Sensor[ğŸ“¡ /api/sensors]
        KPIEnd[ğŸ“ˆ /api/kpi]
    end
    
    subgraph Operations [âš¡ Operasyonlar]
        GET[ğŸ“¥ GET - Listele/Getir]
        POST[ğŸ“¤ POST - OluÅŸtur]
        PUT[ğŸ”„ PUT - GÃ¼ncelle]
        DELETE[ğŸ—‘ï¸ DELETE - Sil]
    end
    
    subgraph Response [ğŸ“¨ YanÄ±tlar]
        Success[âœ… 200/201 Success]
        BadRequest[âš ï¸ 400 Bad Request]
        Unauthorized[ğŸ”’ 401 Unauthorized]
        NotFound[âŒ 404 Not Found]
        ServerError[ğŸ’¥ 500 Server Error]
    end
    
    Auth --> GET
    Auth --> POST
    
    Equip --> GET
    Equip --> POST
    Equip --> PUT
    Equip --> DELETE
    
    WO --> GET
    WO --> POST
    WO --> PUT
    
    Sensor --> GET
    Sensor --> POST
    
    KPIEnd --> GET
    
    GET --> Success
    POST --> Success
    PUT --> Success
    DELETE --> Success
    
    GET -.-> NotFound
    POST -.-> BadRequest
    PUT -.-> NotFound
    DELETE -.-> NotFound
    
    Auth -.-> Unauthorized
    
    GET -.-> ServerError
    POST -.-> ServerError
    
    style API fill:#667eea,color:#fff
    style Operations fill:#10B981,color:#fff
    style Response fill:#F59E0B,color:#fff
            </div>
        </div>

        <div class="legend">
            <h4>ğŸ“Œ Legend - Sembol AÃ§Ä±klamalarÄ±:</h4>
            <span class="legend-item legend-role">ğŸ‘¤ KullanÄ±cÄ±/Rol</span>
            <span class="legend-item legend-process">âš™ï¸ Ä°ÅŸlem/Process</span>
            <span class="legend-item legend-decision">â“ Karar NoktasÄ±</span>
            <span class="legend-item legend-data">ğŸ’¾ Veri/Database</span>
        </div>

        <div class="footer">
            <p><strong>ğŸ”§ CMMS - Computerized Maintenance Management System</strong></p>
            <p>ISO 55000 | EN 15341 | ISO 27001 Uyumlu</p>
            <p style="margin-top: 10px; color: #94a3b8;">Â© 2025 Tren BakÄ±m YÃ¶netim Sistemi</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#4338CA',
                lineColor: '#64748B',
                secondaryColor: '#10B981',
                tertiaryColor: '#F59E0B',
                fontSize: '16px'
            }
        });

        function showChart(chartNum) {
            // Hide all charts
            const charts = document.querySelectorAll('.chart-section');
            charts.forEach(chart => chart.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected chart
            document.getElementById('chart' + chartNum).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
